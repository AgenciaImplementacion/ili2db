language: java
services:
  - postgres
build:
  ci:
    - ant -f build-ili2pg.xml jar
    - ant -f build-ili2gpkg.xml jar
    - psql -c 'create role shippable with superuser;' -U postgres
    - psql -c 'create database ili2db;' -U postgres
    - lsb_release -a
    - sudo apt-get update
    - apt-cache search "postgis"
    - sudo apt-get install postgresql-9.4-postgis-2.1
    - psql -U postgres -c 'create extension postgis;'
    - psql -U postgres -c 'create extension "uuid-ossp";'
    - mkdir -p shippable/testresults
    - ant -f build-ili2pg.xml junit -Dreport.dir=shippable/testresults -Ddburl=jdbc:postgresql:ili2db -Ddbusr=postgres
    